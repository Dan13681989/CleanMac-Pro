#!/bin/bash
# CleanMac Pro - Docker Space Optimization
# Cleans Docker containers, images, and volumes

set -e

echo "ğŸ³ CleanMac Pro - Docker Space Optimization"
echo "==========================================="

if ! command -v docker &> /dev/null; then
    echo "âŒ Docker not found. Skipping Docker cleanup."
    exit 0
fi

echo "ğŸ“Š Current Docker disk usage:"
docker system df

echo ""
echo "ğŸ§¹ Cleaning Docker system..."
echo "   This will remove:"
echo "   - All stopped containers"
echo "   - All unused networks"
echo "   - All unused images"
echo "   - All unused build cache"
echo "   - All unused volumes"
echo ""

read -p "â“ Continue with Docker cleanup? (y/N): " -n 1 -r
echo ""

if [[ $REPLY =~ ^[Yy]$ ]]; then
    docker system prune -a --volumes -f
    echo "âœ… Docker cleanup completed!"
    
    echo ""
    echo "ğŸ“Š Updated Docker disk usage:"
    docker system df
else
    echo "âŒ Docker cleanup cancelled."
fi
